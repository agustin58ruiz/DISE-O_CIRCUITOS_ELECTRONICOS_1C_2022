Version 4
SHEET 1 4676 680
WIRE 416 -1712 416 -1728
WIRE 464 -1712 416 -1712
WIRE 576 -1632 528 -1632
WIRE 1728 -1632 1728 -1712
WIRE 1808 -1632 1728 -1632
WIRE 1808 -1616 1808 -1632
WIRE 528 -1600 528 -1632
WIRE 2000 -1600 1856 -1600
WIRE 1232 -1584 1232 -1600
WIRE 1312 -1584 1232 -1584
WIRE 1344 -1584 1312 -1584
WIRE 416 -1568 416 -1712
WIRE 416 -1568 352 -1568
WIRE 1424 -1568 1408 -1568
WIRE 1232 -1552 1232 -1584
WIRE 2688 -1552 2656 -1552
WIRE 528 -1536 352 -1536
WIRE 1312 -1536 1312 -1584
WIRE 1856 -1536 1856 -1600
WIRE 576 -1504 576 -1632
WIRE 576 -1504 352 -1504
WIRE 224 -1488 192 -1488
WIRE 1808 -1488 1808 -1520
WIRE 2480 -1488 2400 -1488
WIRE 640 -1472 640 -1504
WIRE 640 -1472 352 -1472
WIRE 2544 -1472 2496 -1472
WIRE 2656 -1472 2656 -1552
WIRE 2656 -1472 2624 -1472
WIRE 224 -1456 192 -1456
WIRE 2656 -1456 2656 -1472
WIRE 2688 -1456 2656 -1456
WIRE 400 -1440 352 -1440
WIRE 528 -1440 528 -1536
WIRE 528 -1440 464 -1440
WIRE 2768 -1440 2768 -1552
WIRE 2768 -1440 2752 -1440
WIRE 2800 -1440 2768 -1440
WIRE 128 -1424 32 -1424
WIRE 224 -1424 128 -1424
WIRE 2656 -1424 2624 -1424
WIRE 2688 -1424 2656 -1424
WIRE 2896 -1424 2864 -1424
WIRE 384 -1408 352 -1408
WIRE 1728 -1408 1728 -1632
WIRE 2496 -1408 2496 -1472
WIRE 2496 -1408 2400 -1408
WIRE 2480 -1392 2480 -1488
WIRE 2544 -1392 2480 -1392
WIRE 2624 -1392 2624 -1424
WIRE 1424 -1376 1424 -1568
WIRE 1424 -1376 1360 -1376
WIRE 2400 -1376 2400 -1408
WIRE 1232 -1360 1232 -1472
WIRE 400 -1344 400 -1440
WIRE 1936 -1328 1920 -1328
WIRE 2000 -1328 2000 -1600
WIRE 2000 -1328 1936 -1328
WIRE 1728 -1312 1728 -1328
WIRE 1808 -1312 1808 -1408
WIRE 1808 -1312 1728 -1312
WIRE 1856 -1312 1808 -1312
WIRE 320 -1184 256 -1184
WIRE 128 -1120 112 -1120
WIRE 192 -1120 192 -1184
WIRE 320 -1120 320 -1184
WIRE 320 -1120 272 -1120
WIRE 512 -1120 320 -1120
WIRE 112 -992 112 -1120
WIRE 160 -992 112 -992
WIRE 336 -992 304 -992
WIRE 416 -992 336 -992
WIRE 512 -992 512 -1120
WIRE 512 -992 496 -992
WIRE 640 -992 640 -1472
WIRE 640 -992 512 -992
WIRE 768 -992 640 -992
WIRE 832 -992 768 -992
WIRE 864 -992 832 -992
WIRE 992 -992 944 -992
WIRE 1040 -992 992 -992
WIRE 1184 -992 1184 -1024
WIRE 1184 -992 1040 -992
WIRE 768 -960 768 -992
WIRE 320 -928 320 -944
WIRE 512 -928 512 -992
WIRE 512 -928 384 -928
WIRE 592 -896 576 -896
WIRE 1040 -896 1040 -992
WIRE 1184 -896 1184 -992
WIRE 576 -880 576 -896
WIRE 576 -880 560 -880
WIRE 768 -880 768 -896
WIRE 768 -864 768 -880
WIRE 832 -864 832 -928
WIRE 832 -864 768 -864
WIRE 880 -864 832 -864
WIRE 560 -848 560 -880
WIRE 560 -848 544 -848
WIRE 880 -848 880 -864
WIRE 112 -832 112 -992
WIRE 592 -832 592 -896
WIRE 320 -816 320 -848
WIRE 640 -816 640 -832
WIRE 592 -800 592 -832
WIRE 464 -784 464 -848
WIRE 640 -784 640 -816
WIRE 768 -768 768 -864
WIRE 112 -704 112 -752
WIRE 592 -704 592 -736
WIRE 592 -704 112 -704
WIRE 640 -704 592 -704
WIRE 768 -704 640 -704
WIRE 880 -704 880 -784
WIRE 880 -704 768 -704
WIRE 992 -704 992 -928
WIRE 992 -704 880 -704
WIRE 1040 -704 1040 -832
WIRE 1040 -704 992 -704
WIRE 1184 -704 1184 -816
WIRE 1184 -704 1040 -704
FLAG 880 -704 0
FLAG 320 -816 HO2
FLAG 464 -784 LO2
FLAG 224 -1552 LO2
FLAG 224 -1520 HO2
FLAG 192 -1456 0
FLAG 528 -1360 0
FLAG 384 -1408 0
FLAG 464 -1376 0
FLAG 192 -1488 0
FLAG 400 -1264 0
FLAG 416 -1728 HIN
FLAG 128 -1424 LIN
FLAG 528 -1440 V+
FLAG 1184 -1024 VO
FLAG 640 -992 VS
FLAG 32 -1344 0
FLAG 464 -1632 0
FLAG 1376 -1536 0
FLAG 1888 -1296 0
FLAG 1376 -1600 Vdd
FLAG 1888 -1360 Vdd
FLAG 1344 -1552 Vref
FLAG 1856 -1344 Vref
FLAG 1232 -1680 Vo
FLAG 1728 -1712 Vo
FLAG 1232 -1360 0
FLAG 1728 -1232 0
FLAG 1424 -1568 uvlo
FLAG 1936 -1328 ovlo
FLAG 1312 -1360 0
FLAG 2720 -1472 Vdd
FLAG 2800 -1408 Vref
FLAG 2832 -1392 0
FLAG 2832 -1456 Vdd
FLAG 2400 -1376 0
FLAG 2400 -1568 0
FLAG 2656 -1344 0
FLAG 2896 -1424 OCP
FLAG 2720 -1408 0
FLAG 1056 -1552 Vdd
FLAG 1056 -1472 0
FLAG 960 -1472 0
FLAG 960 -1552 Vref
SYMBOL ind 848 -976 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L4
SYMATTR Value {L}
SYMBOL cap 1024 -896 R0
SYMATTR InstName C6
SYMATTR Value {CLOAD}
SYMATTR SpiceLine Rser=100m
SYMBOL res 1168 -912 R0
SYMATTR InstName R10
SYMATTR Value {RLOAD}
SYMBOL irf520 240 -944 R270
SYMATTR InstName U3
SYMBOL irf520 592 -912 R0
SYMATTR InstName U6
SYMBOL res 560 -864 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1
SYMBOL res 336 -832 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R12
SYMATTR Value 1
SYMBOL voltage 528 -1456 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V13
SYMATTR Value 15
SYMBOL diode 544 -1536 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value 1N4007
SYMBOL cap 640 -1520 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 270n
SYMBOL cap 480 -1376 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C4
SYMATTR Value 270n
SYMBOL voltage 400 -1360 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 7
SYMBOL IR2110 288 -1488 R0
SYMATTR InstName U1
SYMBOL cap 976 -992 R0
SYMATTR InstName C11
SYMATTR Value 1n
SYMATTR SpiceLine Rser=1m
SYMBOL ind 624 -800 R0
SYMATTR InstName L1
SYMATTR Value 7.5n
SYMBOL ind 624 -1008 R0
SYMATTR InstName L2
SYMATTR Value 4.5n
SYMBOL ind 512 -1008 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L3
SYMATTR Value 7.5n
SYMBOL ind 256 -1008 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L5
SYMATTR Value 4.5n
SYMBOL cap 192 -1136 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {Csnub}
SYMBOL res 288 -1136 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10
SYMBOL cap 752 -768 R0
SYMATTR InstName C2
SYMATTR Value {Csnub}
SYMBOL res 752 -976 R0
SYMATTR InstName R2
SYMATTR Value 10
SYMBOL voltage 32 -1440 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(7 0 0 1n 1n 0.8939u 5u)
SYMBOL voltage 464 -1728 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 7 10n 1n 1n 0.8699u 5u)
SYMBOL diode 192 -1168 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4007
SYMBOL diode 816 -992 R0
SYMATTR InstName D3
SYMATTR Value 1N4007
SYMBOL cap 384 -944 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 3.3n
SYMBOL Comparators\\LT1721 1376 -1632 R0
SYMATTR InstName UVLO1
SYMBOL Comparators\\LT1721 1888 -1392 R0
SYMATTR InstName OVLO1
SYMBOL res 1216 -1696 R0
SYMATTR InstName R3
SYMATTR Value 120k
SYMBOL res 1712 -1424 R0
SYMATTR InstName R4
SYMATTR Value 4.99k
SYMBOL res 1712 -1328 R0
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res 1216 -1568 R0
SYMATTR InstName R6
SYMATTR Value 30k
SYMBOL res 1792 -1504 R0
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL nmos 1856 -1616 M0
SYMATTR InstName M1
SYMATTR Value 2N7000
SYMBOL res 1296 -1552 R0
SYMATTR InstName R8
SYMATTR Value 750k
SYMBOL nmos 1360 -1456 M0
SYMATTR InstName M2
SYMATTR Value 2N7000
SYMBOL Comparators\\LT1721 2832 -1488 R0
SYMATTR InstName CurrMax1
SYMBOL res 2384 -1504 R0
SYMATTR InstName Rsens1
SYMATTR Value 0.22
SYMBOL current 2400 -1568 R0
WINDOW 3 -55 -120 VRight 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value PWL(1u 10m 10u 1.5 11u 1.5 20u 10m)
SYMBOL res 2640 -1440 R0
SYMATTR InstName R9
SYMATTR Value 54.54k
SYMBOL res 2784 -1568 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 54.54k
SYMBOL res 2640 -1488 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL res 2640 -1408 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL OpAmps\\LT1215 2720 -1504 R0
SYMATTR InstName U2
SYMBOL voltage 112 -848 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PWL(1n 0 20u 36 120u 46 150u 24)
SYMBOL cap 576 -800 R0
SYMATTR InstName C7
SYMATTR Value 3.3n
SYMBOL voltage 1056 -1568 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 7
SYMBOL voltage 960 -1568 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 1.2
TEXT 128 -544 Left 2 !.tran 0 150u 0 startup
TEXT 1696 -1056 Left 2 !.param CLOAD 1u
TEXT 1680 -1016 Left 2 !.param RLOAD 60
TEXT 1680 -944 Left 2 !.param L 65.3u
TEXT -192 -536 Left 2 !.include irf520.txt
TEXT -160 -392 Left 2 !.include IR2110.txt
TEXT -152 -232 Left 2 !.MODEL 1N4007 D  ( IS=76.9p RS=42.0m BV=1.00k IBV=5.00u\n+ CJO=26.5p  M=0.333 N=1.45 TT=4.32u )
TEXT 640 -464 Left 2 !.options gmin=1e-10\n.options abstol=1e-10\n.options reltol=0.0005\n.options cshunt=1e-15
TEXT 32 -1768 Left 2 ;Driver
TEXT -272 -1064 Left 2 !.param Csnub 10n
TEXT 2016 -1760 Left 2 ;OVLO
TEXT 1960 -1736 Left 2 ;Rise: 7.3V
TEXT 1968 -1712 Left 2 ;Fall: 6.9V
TEXT 1368 -1720 Left 2 ;UVLO
TEXT 1328 -1696 Left 2 ;Fall: 5.6V
TEXT 1320 -1672 Left 2 ;Rise: 5.9V
TEXT 2528 -1304 Left 2 ;f = IoMax / Vref
TEXT 2528 -1280 Left 2 ;A = f / Rsens
TEXT 2560 -1640 Left 2 ;OCP
TEXT -144 -168 Left 2 !.model 2N7000 VDMOS(Rg=3 Vto=3 Rd=0 Rs=.75 Rb=.14 Kp=.17 mtriode=1.25 Cgdmax=80p Cgdmin=12p Cgs=50p Cjo=50p Is=.04p mfg=Fairchild Vds=60 Ron=5 Qg=.223n)
LINE Normal 2080 -1776 1664 -1776 2
LINE Normal 2080 -1200 2080 -1776 2
LINE Normal 1696 -1200 2080 -1200 2
LINE Normal 1664 -1200 1696 -1200 2
LINE Normal 1664 -1760 1664 -1200 2
LINE Normal 1664 -1776 1664 -1760 2
LINE Normal 1184 -1744 1488 -1744 2
LINE Normal 1184 -1328 1184 -1744 2
LINE Normal 1488 -1328 1184 -1328 2
LINE Normal 1488 -1744 1488 -1328 2
LINE Normal 1456 -1808 1456 -1808 2
LINE Normal 2304 -1696 2304 -1216 2
LINE Normal 2960 -1696 2304 -1696 2
LINE Normal 2960 -1216 2960 -1696 2
LINE Normal 2304 -1216 2960 -1216 2
LINE Normal 2240 -1264 2240 -1264 2
RECTANGLE Normal 800 -1216 0 -1808 2
