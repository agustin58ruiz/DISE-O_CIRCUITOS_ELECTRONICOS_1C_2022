Version 4
SHEET 1 5876 680
WIRE 2448 -784 2032 -784
WIRE 2480 -784 2448 -784
WIRE 2672 -784 2544 -784
WIRE 2448 -768 2448 -784
WIRE 1968 -736 1968 -784
WIRE 2080 -736 1968 -736
WIRE 2128 -736 2080 -736
WIRE 1968 -720 1968 -736
WIRE 160 -704 32 -704
WIRE 2448 -672 2448 -688
WIRE 160 -624 160 -704
WIRE 2400 -608 2384 -608
WIRE 288 -592 192 -592
WIRE 2448 -544 2448 -592
WIRE 704 -512 512 -512
WIRE 832 -512 704 -512
WIRE 928 -512 896 -512
WIRE 1200 -512 928 -512
WIRE 1232 -512 1200 -512
WIRE 1456 -512 1232 -512
WIRE 1632 -512 1536 -512
WIRE 1776 -512 1632 -512
WIRE 2448 -496 2448 -544
WIRE 1232 -464 1232 -512
WIRE 912 -448 912 -464
WIRE 1184 -448 1168 -448
WIRE -272 -432 -672 -432
WIRE -80 -432 -144 -432
WIRE -32 -432 -80 -432
WIRE 0 -432 -32 -432
WIRE 1168 -432 1168 -448
WIRE 1168 -432 1152 -432
WIRE 2384 -432 2336 -432
WIRE 2400 -432 2384 -432
WIRE 1632 -416 1632 -512
WIRE 1776 -416 1776 -512
WIRE 1152 -400 1152 -432
WIRE 1152 -400 1136 -400
WIRE -768 -384 -800 -384
WIRE 1184 -384 1184 -448
WIRE 1232 -368 1232 -384
WIRE 512 -352 512 -432
WIRE 912 -336 912 -368
WIRE 1056 -336 1056 -400
WIRE 2560 -336 2448 -336
WIRE 2672 -336 2672 -784
WIRE 2672 -336 2560 -336
WIRE -800 -320 -800 -384
WIRE -672 -320 -672 -352
WIRE 2448 -320 2448 -336
WIRE 2448 -240 2368 -240
WIRE 512 -224 512 -272
WIRE 1232 -224 1232 -368
WIRE 1232 -224 512 -224
WIRE 1472 -224 1232 -224
WIRE 1632 -224 1632 -352
WIRE 1632 -224 1472 -224
WIRE 1776 -224 1776 -336
WIRE 1776 -224 1632 -224
WIRE 2448 -224 2448 -240
WIRE 2448 -128 2448 -144
WIRE 848 -80 752 -80
WIRE 192 -64 160 -64
WIRE 304 -64 272 -64
WIRE 400 -64 368 -64
WIRE 2384 -64 2352 -64
WIRE 2400 -64 2384 -64
WIRE 2416 -64 2400 -64
WIRE 528 -32 464 -32
WIRE 672 -32 608 -32
WIRE 2448 -16 2448 -48
WIRE 304 0 304 -16
WIRE 304 32 304 0
WIRE 400 48 400 -64
WIRE 400 48 336 48
WIRE 464 48 464 -32
WIRE 464 48 400 48
WIRE 480 48 464 48
WIRE 560 48 544 48
WIRE 672 48 672 -32
WIRE 672 48 640 48
WIRE 848 48 848 0
WIRE 848 48 672 48
WIRE 2448 48 2448 -16
WIRE -800 64 -800 -320
WIRE 160 64 160 -64
WIRE 160 64 -800 64
WIRE 272 64 160 64
WIRE 848 64 848 48
WIRE 400 80 336 80
WIRE 400 128 400 80
WIRE 96 160 96 144
WIRE 96 176 96 160
WIRE 304 176 304 96
WIRE 400 240 400 208
WIRE 2448 256 2448 208
WIRE 96 288 96 256
FLAG -80 -432 c
FLAG -672 -320 0
FLAG -768 -384 ctrl
IOPIN -768 -384 Out
FLAG -800 -320 x
FLAG 304 176 0
FLAG 400 240 0
FLAG 304 0 VPOS
FLAG 160 -560 0
FLAG 1472 -224 0
FLAG 1968 -640 0
FLAG 2448 -544 HO3
FLAG 2448 256 0
FLAG 2448 -16 LO3
FLAG 2400 -656 0
FLAG 2400 -480 0
FLAG 2400 -112 0
FLAG 2400 64 0
FLAG 32 -624 0
FLAG 912 -336 HO3
FLAG 1056 -336 LO3
FLAG 848 144 0
FLAG -32 -432 HIN3
FLAG 288 -592 LIN3
FLAG 112 -592 HIN3
FLAG 2384 -608 HIN3
FLAG 96 288 0
FLAG 96 160 VPOS
FLAG 2400 112 HIN3
FLAG 2128 -736 VDRV
FLAG 2368 -240 VDRV
FLAG 2384 -432 LIN3
FLAG 2384 -64 LIN3
FLAG 1200 -512 Vs
FLAG 2560 -336 Vs
FLAG 2080 -672 0
FLAG 1632 -512 VO
FLAG 752 -80 VO
FLAG 704 -512 VIN
SYMBOL bv -672 -448 R0
SYMATTR InstName B1
SYMATTR Value V=limit(v(ctrl), 0.01, 0.9)
SYMBOL Opamps\\LT1215 304 0 M0
SYMATTR InstName U9
SYMBOL cap 544 32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value 3.9nF
SYMBOL cap 368 -80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C10
SYMATTR Value 13nF
SYMBOL res 288 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 8.6k
SYMBOL res 656 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 360
SYMBOL res 624 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 30k
SYMBOL voltage 400 112 R0
WINDOW 123 24 116 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 0
SYMATTR InstName Vref1
SYMATTR Value PWL(0 5 .1m 5 1.1m 5.1)
SYMBOL NOT 144 -592 R0
SYMATTR InstName X2
SYMBOL voltage 512 -528 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V13
SYMATTR Value PULSE(0 36 .3m 1n 1n 1)
SYMBOL ind 1440 -496 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L4
SYMATTR Value {L}
SYMBOL cap 1616 -416 R0
SYMATTR InstName C8
SYMATTR Value {CLOAD}
SYMBOL res 1760 -432 R0
SYMATTR InstName R22
SYMATTR Value {RLOAD}
SYMBOL irf520 832 -464 R270
SYMATTR InstName U10
SYMBOL irf520 1184 -464 R0
SYMATTR InstName U11
SYMBOL res 1152 -416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 1
SYMBOL voltage 512 -368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V14
SYMATTR Value PULSE(0 -24 1.5m 10u 1n 1)
SYMBOL voltage 1968 -736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V
SYMATTR Value 7
SYMBOL diode 1968 -768 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMBOL cap 2544 -800 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value 220n
SYMBOL sw 2448 -688 R0
SYMATTR InstName S7
SYMATTR Value MYSW
SYMBOL res 2432 -784 R0
SYMATTR InstName R24
SYMATTR Value 1
SYMBOL sw 2448 -512 R0
SYMATTR InstName S8
SYMATTR Value MYSW
SYMBOL res 2432 -432 R0
SYMATTR InstName R25
SYMATTR Value 1
SYMBOL sw 2448 -144 R0
SYMATTR InstName S9
SYMATTR Value MYSW
SYMBOL sw 2448 32 R0
SYMATTR InstName S10
SYMATTR Value MYSW
SYMBOL res 2432 112 R0
SYMATTR InstName R26
SYMATTR Value 1
SYMBOL res 2432 -240 R0
SYMATTR InstName R27
SYMATTR Value 1
SYMBOL voltage 32 -720 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V15
SYMATTR Value 1
SYMBOL res 896 -464 R0
SYMATTR InstName R28
SYMATTR Value 1
SYMBOL res 864 16 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R31
SYMATTR Value 10k
SYMBOL res 864 160 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R32
SYMATTR Value 40.8k
SYMBOL voltage 96 160 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName Vg1
SYMATTR Value 12
SYMBOL PWM -208 -432 R0
SYMATTR InstName U8
SYMATTR SpiceLine VM=1V, fs=200kHz
SYMBOL cap 2096 -672 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C1
SYMATTR Value 220n
TEXT 80 504 Left 2 !.tran 0 3m 0 startup
TEXT 1096 608 Left 2 !.model MYSW SW(Ron=.01 Roff=1Meg Vt=.5 Vh=0)
TEXT -368 232 Left 2 !.param CLOAD 20u
TEXT -384 272 Left 2 !.param RLOAD 3
TEXT -384 344 Left 2 !.param L 15u
TEXT -240 512 Left 2 !.include irf520.txt
TEXT -208 656 Left 2 !.include switching.lib
TEXT 80 -296 Left 2 ;Gate driver
TEXT -336 -336 Left 2 ;Pulse-width modulator
